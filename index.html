<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Instagram Highlight Viewer</title>
  <style>
    body { font-family: Arial; background: #f2f2f2; padding: 20px; }
    .container { background: white; padding: 20px; border-radius: 10px; max-width: 700px; margin: auto; }
    input, button { width: 100%; padding: 10px; margin-top: 10px; }
    button { background: #0077ff; color: white; border: none; border-radius: 5px; }
    .media { margin-top: 20px; display: flex; flex-wrap: wrap; gap: 10px; }
    .media img, .media video { max-width: 200px; border-radius: 10px; }
  </style>
</head>
<body>
  <div class="container">
    <h2>Afficher un Highlight Instagram</h2>
    <input type="text" id="username" placeholder="Nom d'utilisateur (ex: sydney_sweeney)">
    <input type="text" id="highlightId" placeholder="ID du Highlight (ex: highlight:18458777440051238)">
    <button onclick="loadHighlight()">Charger</button>

    <div id="result" class="media"></div>
  </div>

  <script>
    async function loadHighlight() {
      const username = document.getElementById('username').value.trim();
      const highlightId = document.getElementById('highlightId').value.trim();
      const result = document.getElementById('result');
      result.innerHTML = "Chargement...";

      if (!username || !highlightId) {
        result.innerHTML = "Veuillez entrer un nom d'utilisateur et un ID de Highlight.";
        return;
      }

      try {
        const res = await fetch(`https://free-instagram-scraper.p.rapidapi.com/user/${username}/highlight/${highlightId}`, {
          method: 'GET',
          headers: {
            'x-rapidapi-host': 'free-instagram-scraper.p.rapidapi.com',
            'x-rapidapi-key': 'ab42dda446mshde4ba65d25b85fdp13b83ejsn3965c0519b7d'
          }
        });

        const data = await res.json();

        if (!data.items || data.items.length === 0) {
          result.innerHTML = "Aucune story trouvÃ©e ou highlight non valide.";
          return;
        }

        result.innerHTML = "";
        data.items.forEach(item => {
          if (item.media_type === 1 && item.image_versions2) {
            const imgUrl = item.image_versions2.candidates[0].url;
            const img = document.createElement('img');
            img.src = imgUrl;
            result.appendChild(img);
          } else if (item.media_type === 2 && item.video_versions) {
            const videoUrl = item.video_versions[0].url;
            const video = document.createElement('video');
            video.src = videoUrl;
            video.controls = true;
            result.appendChild(video);
          }
        });

      } catch (err) {
        console.error(err);
        result.innerHTML = "Erreur lors du chargement : " + err.message;
      }
    }
  </script>
</body>
</html>